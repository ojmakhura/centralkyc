// Generated by andromda-angular cartridge (view\view.component.ts.vsl) DO NOT EDIT
import { 
    Component, 
    OnInit, 
    effect,
    inject, 
    ViewChild, 
    Input, 
    Output, 
    EventEmitter, 
    AfterViewInit,
    signal,
    Signal,
    OnDestroy,
} from '@angular/core';
import { 
    form,
    required,
    email,
    min,
    minLength, 
    max,
    maxLength,
} from "@angular/forms/signals";
import { ActivatedRoute, Router } from '@angular/router';
import {COMMA, ENTER} from '@angular/cdk/keycodes';
import { 
    FormGroup, 
    FormControl, 
    FormArray, 
    FormBuilder, 
    ReactiveFormsModule, 
    Validators 
} from '@angular/forms';
import { formatDate } from '@angular/common';
import { MatPaginator } from '@angular/material/paginator';
import { MatSort } from '@angular/material/sort';
import { MatSelectChange } from '@angular/material/select';
import { MatRadioChange } from '@angular/material/radio';
import { MatCheckboxChange } from '@angular/material/checkbox';
import { UseCaseScope } from '@app/utils/use-case-scope';
import { Observable, of, Subscription } from 'rxjs';
import { SearchObject } from '@models/search-object';
import { MatDialog } from '@angular/material/dialog';
import { MatTableDataSource } from '@angular/material/table';
import { MatChipInputEvent } from '@angular/material/chips';
import { MatAutocompleteSelectedEvent } from '@angular/material/autocomplete';
import { TableComponent } from '@components/table/table';
import { ColumnModel } from '@models/column.model';
import { ActionTemplate } from '@models/action-template';

import { SettingsDTO } from '@models/bw/co/centralkyc/settings/settings-dto';
import { SettingsApi } from '@services/bw/co/centralkyc/settings/settings-api';
import { DocumentTypeDTO } from '@models/bw/co/centralkyc/document/type/document-type-dto';
import { TargetEntity } from '@models/bw/co/centralkyc/target-entity';
import { DocumentDTO } from '@models/bw/co/centralkyc/document/document-dto';
import { SettingsControllerImpl } from '@controllers/settings/settings-controller-impl';
import { ToastrService } from 'ngx-toastr';
import { Page } from '@app/models/page.model';

export class EditSettingsVarsForm {
    id: string | any = null;
    createdAt: Date | any = null;
    createdBy: string | any = null;
    modifiedAt: Date | any = null;
    modifiedBy: string | any = null;
    kycDuration: number | any = null;
    selectedOrgDocument: DocumentTypeDTO | any = null;
    organisationDocuments: Array<DocumentTypeDTO> = [];
    selectedKycOrgDocument: DocumentTypeDTO | any = null;
    orgKycDocuments: Array<DocumentTypeDTO> | any[] = [];
    selectedIndDocument: DocumentTypeDTO | any = null;
    individualDocuments: Array<DocumentTypeDTO> | any[] = [];
    selectedKycIndDocument: DocumentTypeDTO | any = null;
    indKycDocuments: Array<DocumentTypeDTO> | any[] = [];
    invoiceDocumentType: DocumentTypeDTO | any = null;
    invoiceTemplateType: DocumentTypeDTO | any = null;
    invoiceTemplate: DocumentDTO | any = null;
    quotationDocumentType: DocumentTypeDTO | any = null;
    quotationTemplateType: DocumentTypeDTO | any = null;
    quotationTemplate: DocumentDTO | any = null;
    clientRequestFileType: DocumentTypeDTO | any = null;
}

@Component({
  selector: 'app-edit-settings-base',
  template: ''
})
export abstract class EditSettingsComponent implements OnInit, AfterViewInit, OnDestroy {

    separatorKeysCodes: number[] = [ENTER, COMMA];
    @Input() editSettingsVarsForm: EditSettingsVarsForm = new EditSettingsVarsForm();
    editSettingsSignal = signal(this.editSettingsVarsForm);
    editSettingsSignalForm = form(this.editSettingsSignal, (path) => {
      required(path.kycDuration, { message: 'kyc.duration.required' })
      required(path.invoiceDocumentType, { message: 'invoice.document.type.required' })
      required(path.invoiceTemplateType, { message: 'invoice.template.type.required' })
      required(path.quotationDocumentType, { message: 'quotation.document.type.required' })
      required(path.quotationTemplateType, { message: 'quotation.template.type.required' })
    });
    
	    hide: boolean = false;
    protected route: ActivatedRoute = inject(ActivatedRoute);
    protected router: Router = inject(Router);
    protected formBuilder: FormBuilder = inject(FormBuilder);
    protected useCaseScope: UseCaseScope = inject(UseCaseScope);
    dialog: MatDialog = inject(MatDialog);
    toaster: ToastrService = inject(ToastrService);
    settingsController: SettingsControllerImpl = inject(SettingsControllerImpl);
    readonly settingsApi = inject(SettingsApi);
        selectedOrgDocumentFilterCtrl: FormControl = new FormControl();

    selectedOrgDocumentCompare(o1: DocumentTypeDTO | any, o2: DocumentTypeDTO | any) {
        return o1 && o2 && o1.id === o2.id;
    }

    filterSelectedOrgDocument() {}

    selectedOrgDocumentControl = new FormControl();

    selectedOrgDocumentBackingList: DocumentTypeDTO[] = [];
    selectedOrgDocumentFilteredList$: Observable<DocumentTypeDTO[] | any[]> = of([]);
    selectedOrgDocumentChipControl: FormControl = new FormControl([]);

    selectedOrgDocumentDisplays: string[] = [
        'name',
    ];

    documentsTableColumns: ColumnModel[] = [
    new ColumnModel('code', 'code', false),
    new ColumnModel('name', 'name', false),
  ];

    @ViewChild('organisationDocumentsTable') organisationDocumentsTable!: TableComponent<Array<DocumentTypeDTO>>;
    organisationDocumentsTableSignal: Signal<Array<DocumentTypeDTO> | Page<any> | undefined> = signal(undefined);
    organisationDocumentsTablePaged: boolean = true;
    
    organisationDocumentsTableColumns: ColumnModel[] = [
        new ColumnModel(
            'code', 
            'code',
            false,
        ),
        new ColumnModel(
            'name', 
            'name',
            false,
        ),
        new ColumnModel(
            'description', 
            'description',
            false,
        ),
        new ColumnModel(
            'id', 
            'id',
            false,
        ),
        new ColumnModel(
            'createdBy', 
            'created.by',
            false,
        ),
        new ColumnModel(
            'createdAt', 
            'created.at',
            false,
        ),
        new ColumnModel(
            'modifiedBy', 
            'modified.by',
            false,
        ),
        new ColumnModel(
            'modifiedAt', 
            'modified.at',
            false,
        ),
    ];

    organisationDocumentsTableColumnsActions: ActionTemplate[] = [
    ];

    showOrganisationDocumentsActions = false;

    selectedKycOrgDocumentFilterCtrl: FormControl = new FormControl();

    selectedKycOrgDocumentCompare(o1: DocumentTypeDTO | any, o2: DocumentTypeDTO | any) {
        return o1 && o2 && o1.id === o2.id;
    }

    filterSelectedKycOrgDocument() {}

    selectedKycOrgDocumentControl = new FormControl();

    selectedKycOrgDocumentBackingList: DocumentTypeDTO[] = [];
    selectedKycOrgDocumentFilteredList$: Observable<DocumentTypeDTO[] | any[]> = of([]);
    selectedKycOrgDocumentChipControl: FormControl = new FormControl([]);

    selectedKycOrgDocumentDisplays: string[] = [
        'name',
    ];

    @ViewChild('orgKycDocumentsTable') orgKycDocumentsTable!: TableComponent<Array<DocumentTypeDTO>>;
    orgKycDocumentsTableSignal: Signal<Array<DocumentTypeDTO> | Page<any> | undefined> = signal(undefined);
    orgKycDocumentsTablePaged: boolean = true;
    
    orgKycDocumentsTableColumns: ColumnModel[] = [
        new ColumnModel(
            'code', 
            'code',
            false,
        ),
        new ColumnModel(
            'name', 
            'name',
            false,
        ),
        new ColumnModel(
            'description', 
            'description',
            false,
        ),
        new ColumnModel(
            'id', 
            'id',
            false,
        ),
        new ColumnModel(
            'createdBy', 
            'created.by',
            false,
        ),
        new ColumnModel(
            'createdAt', 
            'created.at',
            false,
        ),
        new ColumnModel(
            'modifiedBy', 
            'modified.by',
            false,
        ),
        new ColumnModel(
            'modifiedAt', 
            'modified.at',
            false,
        ),
    ];

    orgKycDocumentsTableColumnsActions: ActionTemplate[] = [
    ];

    showOrgKycDocumentsActions = false;

    selectedIndDocumentFilterCtrl: FormControl = new FormControl();

    selectedIndDocumentCompare(o1: DocumentTypeDTO | any, o2: DocumentTypeDTO | any) {
        return o1 && o2 && o1.id === o2.id;
    }

    filterSelectedIndDocument() {}

    selectedIndDocumentControl = new FormControl();

    selectedIndDocumentBackingList: DocumentTypeDTO[] = [];
    selectedIndDocumentFilteredList$: Observable<DocumentTypeDTO[] | any[]> = of([]);
    selectedIndDocumentChipControl: FormControl = new FormControl([]);

    selectedIndDocumentDisplays: string[] = [
        'name',
    ];

    @ViewChild('individualDocumentsTable') individualDocumentsTable!: TableComponent<Array<DocumentTypeDTO>>;
    individualDocumentsTableSignal: Signal<Array<DocumentTypeDTO> | Page<any> | undefined> = signal(undefined);
    individualDocumentsTablePaged: boolean = true;
    
    individualDocumentsTableColumns: ColumnModel[] = [
        new ColumnModel(
            'code', 
            'code',
            false,
        ),
        new ColumnModel(
            'name', 
            'name',
            false,
        ),
        new ColumnModel(
            'description', 
            'description',
            false,
        ),
        new ColumnModel(
            'id', 
            'id',
            false,
        ),
        new ColumnModel(
            'createdBy', 
            'created.by',
            false,
        ),
        new ColumnModel(
            'createdAt', 
            'created.at',
            false,
        ),
        new ColumnModel(
            'modifiedBy', 
            'modified.by',
            false,
        ),
        new ColumnModel(
            'modifiedAt', 
            'modified.at',
            false,
        ),
    ];

    individualDocumentsTableColumnsActions: ActionTemplate[] = [
    ];

    showIndividualDocumentsActions = false;

    selectedKycIndDocumentFilterCtrl: FormControl = new FormControl();

    selectedKycIndDocumentCompare(o1: DocumentTypeDTO | any, o2: DocumentTypeDTO | any) {
        return o1 && o2 && o1.id === o2.id;
    }

    filterSelectedKycIndDocument() {}

    
    selectedKycIndDocumentControl = new FormControl();
    selectedKycIndDocumentBackingList: DocumentTypeDTO[] = [];
    selectedKycIndDocumentFilteredList$: Observable<DocumentTypeDTO[] | any[]> = of([]);
    selectedKycIndDocumentChipControl: FormControl = new FormControl([]);

    selectedKycIndDocumentDisplays: string[] = [
        'name',
    ];

    @ViewChild('indKycDocumentsTable') indKycDocumentsTable!: TableComponent<Array<DocumentTypeDTO>>;
    indKycDocumentsTableSignal: Signal<Array<DocumentTypeDTO> | Page<any> | undefined> = signal(undefined);
    indKycDocumentsTablePaged: boolean = true;
    
    indKycDocumentsTableColumns: ColumnModel[] = [
        new ColumnModel(
            'code', 
            'code',
            false,
        ),
        new ColumnModel(
            'name', 
            'name',
            false,
        ),
        new ColumnModel(
            'description', 
            'description',
            false,
        ),
        new ColumnModel(
            'id', 
            'id',
            false,
        ),
        new ColumnModel(
            'createdBy', 
            'created.by',
            false,
        ),
        new ColumnModel(
            'createdAt', 
            'created.at',
            false,
        ),
        new ColumnModel(
            'modifiedBy', 
            'modified.by',
            false,
        ),
        new ColumnModel(
            'modifiedAt', 
            'modified.at',
            false,
        ),
    ];

    indKycDocumentsTableColumnsActions: ActionTemplate[] = [
    ];

    showIndKycDocumentsActions = false;

    invoiceDocumentTypeFilterCtrl: FormControl = new FormControl();

    invoiceDocumentTypeCompare(o1: DocumentTypeDTO | any, o2: DocumentTypeDTO | any) {
        return o1 && o2 && o1.id === o2.id;
    }

    filterInvoiceDocumentType() {}

    invoiceDocumentTypeBackingList: DocumentTypeDTO[] = [];
    invoiceDocumentTypeFilteredList$: Observable<DocumentTypeDTO[] | any[]> = of([]);
    invoiceDocumentTypeChipControl: FormControl = new FormControl([]);

    invoiceDocumentTypeDisplays: string[] = [
        'name',
    ];

    invoiceTemplateTypeFilterCtrl: FormControl = new FormControl();

    invoiceTemplateTypeCompare(o1: DocumentTypeDTO | any, o2: DocumentTypeDTO | any) {
        return o1 && o2 && o1.id === o2.id;
    }

    filterInvoiceTemplateType() {}

    invoiceTemplateTypeBackingList: DocumentTypeDTO[] = [];
    invoiceTemplateTypeFilteredList$: Observable<DocumentTypeDTO[] | any[]> = of([]);
    invoiceTemplateTypeChipControl: FormControl = new FormControl([]);

    invoiceTemplateTypeDisplays: string[] = [
        'name',
    ];

    quotationDocumentTypeFilterCtrl: FormControl = new FormControl();

    quotationDocumentTypeCompare(o1: DocumentTypeDTO | any, o2: DocumentTypeDTO | any) {
        return o1 && o2 && o1.id === o2.id;
    }

    filterQuotationDocumentType() {}

    quotationDocumentTypeBackingList: DocumentTypeDTO[] = [];
    quotationDocumentTypeFilteredList$: Observable<DocumentTypeDTO[] | any[]> = of([]);
    quotationDocumentTypeChipControl: FormControl = new FormControl([]);

    quotationDocumentTypeDisplays: string[] = [
        'name',
    ];

    quotationTemplateTypeFilterCtrl: FormControl = new FormControl();

    quotationTemplateTypeCompare(o1: DocumentTypeDTO | any, o2: DocumentTypeDTO | any) {
        return o1 && o2 && o1.id === o2.id;
    }

    filterQuotationTemplateType() {}

    quotationTemplateTypeBackingList: DocumentTypeDTO[] = [];
    quotationTemplateTypeFilteredList$: Observable<DocumentTypeDTO[] | any[]> = of([]);
    quotationTemplateTypeChipControl: FormControl = new FormControl([]);

    quotationTemplateTypeDisplays: string[] = [
        'name',
    ];

    clientRequestFileTypeFilterCtrl: FormControl = new FormControl();

    clientRequestFileTypeCompare(o1: DocumentTypeDTO | any, o2: DocumentTypeDTO | any) {
        return o1 && o2 && o1.id === o2.id;
    }

    filterClientRequestFileType() {}

    clientRequestFileTypeBackingList: DocumentTypeDTO[] = [];
    clientRequestFileTypeFilteredList$: Observable<DocumentTypeDTO[] | any[]> = of([]);
    clientRequestFileTypeChipControl: FormControl = new FormControl([]);

    clientRequestFileTypeDisplays: string[] = [
        'name',
    ];


    TargetEntityT: any = TargetEntity;
    TargetEntityOptions = Object.keys(this.TargetEntityT);
    loaderMessage: Signal<string> = signal('');
    messages: Signal<any> = signal({});
    success: Signal<boolean> = signal(false);
    loading: Signal<boolean> = signal(false);
    error: Signal<boolean> = signal(false);
    selected: any = null;

    
    constructor() {


    effect(() => {
      let messages = this.messages();

      if(this.success() && !this.loading()) {
        this.toaster.success(messages[0]);
      }

      if (this.error() && !this.loading()) {
        this.toaster.error(messages[0]);
      }
    })
    }

	
    ngOnInit() {
                
                                                
    }

    handleFormChanges(change: any): void {
        
    }

    editSettingsFormReset() {

        this.editSettingsSignal.set(new EditSettingsVarsForm());
    }

    
    doNgAfterViewInit(): void {}

    ngAfterViewInit() {
        this.doNgAfterViewInit();
        this.settingsController.resetUseCaseScope();
    }

    newForm(editSettingsVarsForm: EditSettingsVarsForm): FormGroup {
        return this.formBuilder.group({

        });
    }

    abstract doNgOnDestroy(): void;

    ngOnDestroy() { 
        this.doNgOnDestroy();
                            }


    /**
     * This method may be overwritten
     */
    beforeEditSettingsSave(form: any): void {}

    /**
     * This method may be overwritten
     */
    afterEditSettingsSave(form: any): void {}

    /**
     * This method may be overwritten
     */
    get editSettingsSaveSettings(): SettingsDTO { 
        return {} as SettingsDTO;
    }

    editSettingsSave(): void {

        let form: any = {
            settings: this.editSettingsSaveSettings,
        };

        this.beforeEditSettingsSave(form);

        this.settingsController.editSettingsSave(form.settings);
        this.afterEditSettingsSave(form);
    }

    

    onAddToOrgDocumentsClick() {}

    onAddToKycOrgDocumentsClick() {}

    onAddToIndDocumentsClick() {}

    onAddToKycIndDocumentsClick() {}

}
