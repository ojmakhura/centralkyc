<!-- Generated by andromda-andromda cartridge (angular\app\view\view.component.html.vsl) DO NOT EDIT! -->
<div class="edit-container">
  <div class="breadcrumb-section">
    <mat-icon class="breadcrumb-icon">home</mat-icon>
    <span class="breadcrumb-text">{{ 'home' | translate }}</span>
    <mat-icon class="breadcrumb-separator">chevron_right</mat-icon>
    <span class="breadcrumb-text">{{ 'settings.title' | translate }}</span>
    <mat-icon class="breadcrumb-separator">chevron_right</mat-icon>
    <span class="breadcrumb-text active">{{ 'edit.settings.title' | translate }}</span>
  </div>
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">
        <mat-icon>settings</mat-icon>
        <span>{{ 'settings.title' | translate }}</span>
      </h1>
      <p class="page-subtitle">{{ 'system.configuration' | translate }}</p>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button mat-raised-button type="button" color="primary" (click)="editSettingsSave()" class="save-btn">
        <mat-icon>save</mat-icon>
        <span>{{ 'save' | translate }}</span>
      </button>
      <button mat-button type="button" (click)="editSettingsFormReset()" [disabled]="loading()">
        <mat-icon>refresh</mat-icon>
        <span>{{ 'reset' | translate }}</span>
      </button>
    </div>
  </div>

  @if (loading()) {
  <div class="loader-container">
    <app-loader [isLoading]="loading()" [size]="'medium'" [message]="loaderMessage()"></app-loader>
  </div>
  }

  <div class="form-container">
    <form class="edit-form">
      <mat-card class="form-section">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>tune</mat-icon>
            {{ 'general.settings' | translate }}
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="field-row">
            <mat-form-field appearance="outline" class="field-half">
              <mat-label>{{ 'kyc.duration' | translate }}</mat-label>
              <input matInput type="number" id="kycDuration" [formField]="editSettingsSignalForm.kycDuration"
                placeholder="{{ 'enter.kyc.duration' | translate }}" />
              <mat-icon matSuffix>schedule</mat-icon>
              @for (error of editSettingsSignalForm.kycDuration.errors; track error) {
              <mat-error translate>{{error.message}}</mat-error>
              }
            </mat-form-field>
            <mat-form-field appearance="outline" class="field-half">
              <mat-label>{{ 'time.to.account.creation' | translate }}</mat-label>
              <input matInput type="number" id="timeToAccountCreation"
                [formField]="editSettingsSignalForm.timeToAccountCreation"
                placeholder="{{ 'enter.time.to.account.creation' | translate }}" />
              <mat-icon matSuffix>timer</mat-icon>
              @for (error of editSettingsSignalForm.timeToAccountCreation.errors; track error) {
              <mat-error translate>{{error.message}}</mat-error>
              }
            </mat-form-field>
          </div>

          <div class="field-row">
            <mat-form-field appearance="outline" class="field-half">
              <mat-label>{{ 'platform.name' | translate }}</mat-label>
              <input matInput type="text" id="platformName" [formField]="editSettingsSignalForm.platformName"
                placeholder="{{ 'enter.platform.name' | translate }}" />
              <mat-icon matSuffix>business</mat-icon>
              @for (error of editSettingsSignalForm.platformName.errors; track error) {
              <mat-error translate>{{error.message}}</mat-error>
              }
            </mat-form-field>
            <mat-form-field appearance="outline" class="field-half">
              <mat-label>{{ 'platform.url' | translate }}</mat-label>
              <input matInput type="text" id="platformUrl" [formField]="editSettingsSignalForm.platformUrl"
                placeholder="{{ 'enter.platform.url' | translate }}" />
              <mat-icon matSuffix>link</mat-icon>
              @for (error of editSettingsSignalForm.platformUrl.errors; track error) {
              <mat-error translate>{{error.message}}</mat-error>
              }
            </mat-form-field>
          </div>

          <div class="field-row">
            <mat-form-field appearance="outline" class="field-half">
              <mat-label>{{ 'kyc.portal.link' | translate }}</mat-label>
              <input matInput type="text" id="kycPortalLink" [formField]="editSettingsSignalForm.kycPortalLink"
                placeholder="{{ 'enter.kyc.portal.link' | translate }}" />
              <mat-icon matSuffix>link</mat-icon>
              @for (error of editSettingsSignalForm.kycPortalLink.errors; track error) {
              <mat-error translate>{{error.message}}</mat-error>
              }
            </mat-form-field>
            <mat-form-field appearance="outline" class="field-half">
              <mat-label>{{ 'support.contact' | translate }}</mat-label>
              <input matInput type="text" id="supportContact" [formField]="editSettingsSignalForm.supportContact"
                placeholder="{{ 'enter.support.contact' | translate }}" />
              <mat-icon matSuffix>support_agent</mat-icon>
              @for (error of editSettingsSignalForm.supportContact.errors; track error) {
              <mat-error translate>{{error.message}}</mat-error>
              }
            </mat-form-field>
          </div>

          <div class="field-row">
            <mat-form-field appearance="outline" class="field-half">
              <mat-label>{{ 'organisation.admin.role' | translate }}</mat-label>
              <mat-select id="organisationAdminRole" [formField]="editSettingsSignalForm.organisationAdminRole">
                <mat-option value="">{{ 'select.role' | translate }}</mat-option>
                @for (role of availableRoles(); track role) {
                <mat-option [value]="role">{{ role }}</mat-option>
                }
              </mat-select>
              <mat-icon matSuffix>admin_panel_settings</mat-icon>
              @for (error of editSettingsSignalForm.organisationAdminRole.errors; track error) {
              <mat-error translate>{{error.message}}</mat-error>
              }
            </mat-form-field>
            <mat-form-field appearance="outline" class="field-half">
              <mat-label>{{ 'normal.user.role' | translate }}</mat-label>
              <mat-select id="normalUserRole" [formField]="editSettingsSignalForm.normalUserRole">
                <mat-option value="">{{ 'select.role' | translate }}</mat-option>
                @for (role of availableRoles(); track role) {
                <mat-option [value]="role">{{ role }}</mat-option>
                }
              </mat-select>
              <mat-icon matSuffix>person</mat-icon>
              @for (error of editSettingsSignalForm.normalUserRole.errors; track error) {
              <mat-error translate>{{error.message}}</mat-error>
              }
            </mat-form-field>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="form-section">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>tune</mat-icon>
            {{ 'document.settings' | translate }}
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
      <div class="field-row">
        <mat-form-field appearance="outline" class="field-half">
          <mat-label>{{ 'client.request.file.type' | translate }}</mat-label>
          <mat-select id="clientRequestFileType" [formField]="editSettingsSignalForm.clientRequestFileType"
            [compareWith]="documentCompare">
            <mat-option>
              <ngx-mat-select-search [placeholderLabel]="'Search'"
                [formField]="editSettingsSignalForm.clientRequestFileTypeFilter"
                [noEntriesFoundLabel]="'No Entries Found'"></ngx-mat-select-search>
              <button mat-flat-button color="primary" type="button"
                (click)="filterClientRequestFileType()">Search</button>
            </mat-option>
            @for (item of clientRequestFileTypeFilteredList(); track item.id) {
            <mat-option [value]="item">{{ item?.name }}</mat-option>
            }
          </mat-select>
          <mat-icon matSuffix>category</mat-icon>
        </mat-form-field>
      </div>

      <!-- Invoice Document Type Selection -->
      <div class="field-row">
        <mat-form-field appearance="outline" class="field-half">
          <mat-label>{{ 'invoice.document.type' | translate }}</mat-label>
          <mat-select id="invoiceDocumentType" [formField]="editSettingsSignalForm.invoiceDocumentType"
            [compareWith]="documentCompare">
            <mat-option>
              <ngx-mat-select-search [placeholderLabel]="'Search'"
                [formField]="editSettingsSignalForm.invoiceDocumentTypeFilter"
                [noEntriesFoundLabel]="'No Entries Found'"></ngx-mat-select-search>
              <button mat-flat-button color="primary" type="button"
                (click)="filterInvoiceDocumentType()">Search</button>
            </mat-option>
            @for (item of invoiceDocumentTypeFilteredList(); track item.id) {
            <mat-option [value]="item">{{ item?.name }}</mat-option>
            }
          </mat-select>
          <mat-icon matSuffix>category</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="field-half">
          <mat-label>{{ 'invoice.template.type' | translate }}</mat-label>
          <mat-select id="invoiceTemplateType" [formField]="editSettingsSignalForm.invoiceTemplateType"
            [compareWith]="documentCompare">
            <mat-option>
              <ngx-mat-select-search [placeholderLabel]="'Search'"
                [formField]="editSettingsSignalForm.invoiceTemplateTypeFilter"
                [noEntriesFoundLabel]="'No Entries Found'"></ngx-mat-select-search>
              <button mat-flat-button color="primary" type="button"
                (click)="filterInvoiceTemplateType()">Search</button>
            </mat-option>
            @for (item of invoiceTemplateTypeFilteredList(); track item.id) {
            <mat-option [value]="item">{{ item?.name }}</mat-option>
            }
          </mat-select>
          <mat-icon matSuffix>description</mat-icon>
        </mat-form-field>
      </div>

      <div class="field-row">
        <button mat-raised-button color="primary" type="button" (click)="attachInvoiceTemplate()" class="action-button">
          <mat-icon>attach_file</mat-icon>
          <span>{{ 'attach.template' | translate }}</span>
        </button>
      </div>

      @if (editSettingsSignal().invoiceTemplate) {
      <div class="field-row">
        <div class="document-info">
          <mat-icon>insert_drive_file</mat-icon>
          <div class="document-details">
            <span class="document-name">{{
              editSettingsSignal().invoiceTemplate.fileName || 'N/A'
              }}</span>
            <!-- <span class="document-type">{{ editSettingsForm.get('invoiceTemplate.documentType')?.value || 'N/A' }}</span> -->
          </div>
          @if (editSettingsSignal().invoiceTemplate.url) {
          <a (click)="downloadTemplate(TargetEntityT.INVOICE)" target="_blank" mat-icon-button color="primary">
            <mat-icon>download</mat-icon>
          </a>
          }
        </div>
      </div>
      } @else {
      <div class="field-row">
        <div class="empty-state">
          <mat-icon>cloud_upload</mat-icon>
          <p>{{ 'no.invoice.template.attached' | translate }}</p>
        </div>
      </div>
      }

      <!-- Quotation Document Type Selection -->
      <div class="field-row">
        <mat-form-field appearance="outline" class="field-half">
          <mat-label>{{ 'quotation.document.type' | translate }}</mat-label>
          <mat-select id="quotationDocumentType" [formField]="editSettingsSignalForm.quotationDocumentType"
            [compareWith]="documentCompare">
            <mat-option>
              <ngx-mat-select-search [placeholderLabel]="'Search'"
                [formField]="editSettingsSignalForm.quotationDocumentTypeFilter"
                [noEntriesFoundLabel]="'No Entries Found'"></ngx-mat-select-search>
              <button mat-flat-button color="primary" type="button"
                (click)="filterQuotationDocumentType()">Search</button>
            </mat-option>
            @for (item of quotationDocumentTypeFilteredList(); track item.id) {
            <mat-option [value]="item">{{ item?.name }}</mat-option>
            }
          </mat-select>
          <mat-icon matSuffix>category</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="field-half">
          <mat-label>{{ 'quotation.template.type' | translate }}</mat-label>
          <mat-select id="quotationTemplateType" [formField]="editSettingsSignalForm.quotationTemplateType"
            [compareWith]="documentCompare">
            <mat-option>
              <ngx-mat-select-search [placeholderLabel]="'Search'"
                [formField]="editSettingsSignalForm.quotationTemplateTypeFilter"
                [noEntriesFoundLabel]="'No Entries Found'"></ngx-mat-select-search>
              <button mat-flat-button color="primary" type="button"
                (click)="filterQuotationTemplateType()">Search</button>
            </mat-option>
            @for (item of quotationTemplateTypeFilteredList(); track item.id) {
            <mat-option [value]="item">{{ item?.name }}</mat-option>
            }
          </mat-select>
          <mat-icon matSuffix>description</mat-icon>
        </mat-form-field>
      </div>

      <div class="field-row">
        <button mat-raised-button color="primary" type="button" (click)="attachQuotationTemplate()"
          class="action-button">
          <mat-icon>attach_file</mat-icon>
          <span>{{ 'attach.template' | translate }}</span>
        </button>
      </div>

      @if (editSettingsSignalForm.quotationTemplate) {
      <div class="field-row">
        <div class="document-info">
          <mat-icon>insert_drive_file</mat-icon>
          <div class="document-details">
            <span class="document-name">{{
              editSettingsSignalForm.quotationTemplate.fileName || 'N/A'
              }}</span>
            <!-- <span class="document-type">{{ editSettingsForm.get('quotationTemplate.documentType')?.value || 'N/A' }}</span> -->
          </div>
          @if (editSettingsSignalForm.quotationTemplate.url) {
          <a (click)="downloadTemplate(TargetEntityT.QUOTATION)" target="_blank" mat-icon-button color="primary">
            <mat-icon>download</mat-icon>
          </a>
          }
        </div>
      </div>
      } @else {
      <div class="field-row">
        <div class="empty-state">
          <mat-icon>cloud_upload</mat-icon>
          <p>{{ 'no.quotation.template.attached' | translate }}</p>
        </div>
      </div>
      }
      </mat-card-content>
      </mat-card>

      <!-- Salary Ranges Section -->
      <mat-card class="form-section">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>attach_money</mat-icon>
            {{ 'salary.ranges' | translate }}
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="field-row">
            <button mat-raised-button color="primary" type="button" (click)="salaryRangesAdd()">
              <mat-icon>add</mat-icon>
              <span translate>add.salary.range</span>
            </button>
          </div>

          @for (item of editSettingsSignalForm.salaryRanges; track i; let i = $index) {
          <div class="salary-range-item">
            <div class="field-row">

              <mat-form-field appearance="outline" class="field-quarter">
                <mat-label translate>min</mat-label>
                <input matInput type="number" id="salaryRangeMin_{{i}}" [formField]="item.min" />
                <mat-icon matSuffix>trending_down</mat-icon>
              </mat-form-field>

              <mat-form-field appearance="outline" class="field-quarter">
                <mat-label translate>max</mat-label>
                <input matInput type="number" id="salaryRangeMax_{{i}}" [formField]="item.max" />
                <mat-icon matSuffix>trending_up</mat-icon>
              </mat-form-field>

              <mat-form-field appearance="outline" class="field-quarter">
                <mat-label translate>active</mat-label>
                <mat-select id="salaryRangeActive_{{i}}" [formField]="item.active">
                  <mat-option [value]="true">{{ 'yes' | translate }}</mat-option>
                  <mat-option [value]="false">{{ 'no' | translate }}</mat-option>
                </mat-select>
                <mat-icon matSuffix>toggle_on</mat-icon>
              </mat-form-field>
              <button mat-icon-button color="warn" type="button" (click)="salaryRangesRemove(i, item().value())"
                matTooltip="{{ 'remove' | translate }}">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </div>
          }

          @if (editSettingsSignalForm.salaryRanges.length === 0) {
          <div class="empty-state">
            <mat-icon>money_off</mat-icon>
            <p translate>no.salary.ranges.defined</p>
          </div>
          }
        </mat-card-content>
      </mat-card>
    </form>
  </div>

  <!-- Document Types Configuration -->
  <mat-card class="form-section">
    <mat-card-header>
      <mat-card-title>
        <mat-icon>folder_open</mat-icon>
        {{ 'document.types.configuration' | translate }}
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-tab-group animationDuration="0ms" class="document-tabs">
        <mat-tab>
          <ng-template mat-tab-label>
            <mat-icon class="tab-icon">business</mat-icon>
            <span translate>organisation.documents</span>
          </ng-template>
          <div class="tab-content">
            <div class="field-row">
              <mat-form-field appearance="outline" class="field-full-width">
                <mat-label>{{ 'selected.org.document' | translate }}</mat-label>
                <mat-select id="selectedOrgDocument" [compareWith]="documentCompare"
                  [formField]="editSettingsSignalForm.selectedOrgDocument">
                  <mat-option>
                    <ngx-mat-select-search [placeholderLabel]="'Search'"
                      [formField]="editSettingsSignalForm.selectedOrgDocumentFilter"
                      [noEntriesFoundLabel]="'No Entries Found'"></ngx-mat-select-search>
                    <button mat-flat-button type="button" color="primary"
                      (click)="filterSelectedOrgDocument()">Search</button>
                  </mat-option>
                  @for (item of selectedOrgDocumentFilteredList(); track item.id) {
                  <mat-option [value]="item">{{ item.name
                    }}</mat-option>
                  }
                </mat-select>
                <mat-icon matSuffix>description</mat-icon>
              </mat-form-field>
            </div>

            <div class="field-row">
              <button mat-raised-button type="button" color="primary" (click)="onAddToOrgDocumentsClick()">
                <mat-icon>add</mat-icon>
                <span translate>add.to.org.documents</span>
              </button>
            </div>

            <div class="table-container">
              <app-table #organisationDocumentsTable [dataColumns]="documentsTableColumns"
                [showActions]="showOrganisationDocumentsActions" [paged]="false"
                [actions]="organisationDocumentsTableColumnsActions"
                (actionClicked)="organisationDocumentsTableActionClicked($event)"
                [dataSignal]="organisationDocumentsTableSignal">
              </app-table>
            </div>
          </div>
        </mat-tab>

        <mat-tab>
          <ng-template mat-tab-label>
            <mat-icon class="tab-icon">verified_user</mat-icon>
            <span translate>org.kyc.documents</span>
          </ng-template>
          <div class="tab-content">
            <div class="field-row">
              <mat-form-field appearance="outline" class="field-full-width">
                <mat-label>{{ 'selected.kyc.org.document' | translate }}</mat-label>
                <mat-select id="selectedKycOrgDocument" [compareWith]="documentCompare"
                  [formField]="editSettingsSignalForm.selectedKycOrgDocument">
                  <mat-option>
                    <ngx-mat-select-search [placeholderLabel]="'Search'"
                      [formField]="editSettingsSignalForm.selectedKycOrgDocumentFilter"
                      (keyup.enter)="filterSelectedKycOrgDocument()"
                      [noEntriesFoundLabel]="'No Entries Found'"></ngx-mat-select-search>
                    <button mat-flat-button type="button" color="primary"
                      (click)="filterSelectedKycOrgDocument()">Search</button>
                  </mat-option>
                  @for (item of selectedKycOrgDocumentFilteredList(); track item.id) {
                  <mat-option [value]="item">{{ item.name
                    }}</mat-option>
                  }
                </mat-select>
                <mat-icon matSuffix>description</mat-icon>
              </mat-form-field>
            </div>

            <div class="field-row">
              <button mat-raised-button type="button" color="primary" (click)="onAddToKycOrgDocumentsClick()">
                <mat-icon>add</mat-icon>
                <span translate>add.to.kyc.org.documents</span>
              </button>
            </div>

            <div class="table-container">
              <app-table #orgKycDocumentsTable [dataColumns]="documentsTableColumns"
                [showActions]="showOrgKycDocumentsActions" [paged]="false"
                [actions]="orgKycDocumentsTableColumnsActions"
                (actionClicked)="orgKycDocumentsTableActionClicked($event)" [dataSignal]="orgKycDocumentsTableSignal">
              </app-table>
            </div>
          </div>
        </mat-tab>

        <mat-tab>
          <ng-template mat-tab-label>
            <mat-icon class="tab-icon">person</mat-icon>
            <span translate>individual.documents</span>
          </ng-template>
          <div class="tab-content">
            <div class="field-row">
              <mat-form-field appearance="outline" class="field-full-width">
                <mat-label>{{ 'selected.ind.document' | translate }}</mat-label>
                <mat-select id="selectedIndDocument" [compareWith]="documentCompare"
                  [formField]="editSettingsSignalForm.selectedIndDocument">
                  <mat-option>
                    <ngx-mat-select-search [placeholderLabel]="'Search'"
                      [formField]="editSettingsSignalForm.selectedIndDocumentFilter"
                      (keyup.enter)="filterSelectedIndDocument()"
                      [noEntriesFoundLabel]="'No Entries Found'"></ngx-mat-select-search>
                    <button mat-flat-button type="button" color="primary"
                      (click)="filterSelectedIndDocument()">Search</button>
                  </mat-option>
                  @for (item of selectedIndDocumentFilteredList(); track item.id) {
                  <mat-option [value]="item">{{ item.name
                    }}</mat-option>
                  }
                </mat-select>
                <mat-icon matSuffix>description</mat-icon>
              </mat-form-field>
            </div>

            <div class="field-row">
              <button mat-raised-button type="button" color="primary" (click)="onAddToIndDocumentsClick()">
                <mat-icon>add</mat-icon>
                <span translate>add.to.ind.documents</span>
              </button>
            </div>

            <div class="table-container">
              <app-table #individualDocumentsTable [dataColumns]="documentsTableColumns"
                [showActions]="showIndividualDocumentsActions" [paged]="false"
                [actions]="individualDocumentsTableColumnsActions"
                (actionClicked)="individualDocumentsTableActionClicked($event)"
                [dataSignal]="individualDocumentsTableSignal">
              </app-table>
            </div>
          </div>
        </mat-tab>

        <mat-tab>
          <ng-template mat-tab-label>
            <mat-icon class="tab-icon">badge</mat-icon>
            <span translate>ind.kyc.documents</span>
          </ng-template>
          <div class="tab-content">
            <div class="field-row">
              <mat-form-field appearance="outline" class="field-full-width">
                <mat-label>{{ 'selected.kyc.ind.document' | translate }}</mat-label>
                <mat-select id="selectedKycIndDocument" [compareWith]="documentCompare"
                  [formField]="editSettingsSignalForm.selectedKycIndDocument">
                  <mat-option>
                    <ngx-mat-select-search [placeholderLabel]="'Search'"
                      [formField]="editSettingsSignalForm.selectedKycIndDocumentFilter"
                      (keyup.enter)="filterSelectedKycIndDocument()"
                      [noEntriesFoundLabel]="'No Entries Found'"></ngx-mat-select-search>
                    <button mat-flat-button type="button" color="primary"
                      (click)="filterSelectedKycIndDocument()">Search</button>
                  </mat-option>
                  @for (item of selectedKycIndDocumentFilteredList(); track item.id) {
                  <mat-option [value]="item">{{ item.name
                    }}</mat-option>
                  }
                </mat-select>
                <mat-icon matSuffix>description</mat-icon>
              </mat-form-field>
            </div>

            <div class="field-row">
              <button mat-raised-button type="button" color="primary" (click)="onAddToKycIndDocumentsClick()">
                <mat-icon>add</mat-icon>
                <span translate>add.to.kyc.ind.documents</span>
              </button>
            </div>

            <div class="table-container">
              <app-table #indKycDocumentsTable [dataColumns]="documentsTableColumns"
                [showActions]="showIndKycDocumentsActions" [paged]="false"
                [actions]="indKycDocumentsTableColumnsActions"
                (actionClicked)="indKycDocumentsTableActionClicked($event)" [dataSignal]="indKycDocumentsTableSignal">
              </app-table>
            </div>
          </div>
        </mat-tab>
      </mat-tab-group>
    </mat-card-content>
  </mat-card>

</div>
