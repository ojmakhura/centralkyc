// Generated by andromda-angular cartridge (view\components\component.ts.vsl) DO NOT EDIT
import {
  AfterViewInit,
  Component,
  inject,
  Input,
  OnInit,
  ViewChild,
  signal,
  Signal,
  OnDestroy,
  linkedSignal,
} from "@angular/core";
import {COMMA, ENTER} from '@angular/cdk/keycodes';
import {
  FormsModule,
  ReactiveFormsModule,
  FormGroup,
  FormControl,
  Validators,
  FormArray,
} from "@angular/forms";
import { SelectItem } from "@app/utils/select-item";
import {
    form,
    required,
    email,
    min,
    minLength,
    max,
    maxLength,
    SchemaPathTree,
    PathKind,
} from "@angular/forms/signals";
import { TableComponent } from '@components/table/table';
import { ColumnModel } from "@models/column.model";
import { ActionTemplate } from '@models/action-template';
import { MatSelectChange } from '@angular/material/select';
import { MatRadioChange } from '@angular/material/radio';
import { MatCheckboxChange } from '@angular/material/checkbox';
import { MatChip, MatChipInput, MatChipInputEvent } from "@angular/material/chips";
import {MatAutocompleteSelectedEvent, MatAutocompleteModule} from '@angular/material/autocomplete';
import { MatDialog } from '@angular/material/dialog';
import { firstValueFrom, Observable, map, of, startWith, Subscription } from "rxjs";
import { CommonModule } from '@angular/common';
import { TranslateModule } from '@ngx-translate/core';
import { MaterialModule } from '@app/material.module';
import { Page } from "@app/models/page.model";

import { OrganisationListDTO } from '@models/bw/co/centralkyc/organisation/organisation-list-dto';
import { GeneralStatus } from '@models/bw/co/centralkyc/general-status';
import { KycComplianceStatus } from '@models/bw/co/centralkyc/kyc/kyc-compliance-status';
import { BranchDTO } from '@models/bw/co/centralkyc/organisation/branch/branch-dto';
import { SearchObject } from '@models/search-object';
import { GenericComponent } from "@views/generic.component";

export class UserEditorForm {
    userId: string | any = null;
    username: string | any = null;
    email: string | any = null;
    password: string | any = null;
    firstName: string | any = null;
    lastName: string | any = null;
    enabled: boolean | any = null;
    roles: Array<string> = [];
    organisation: OrganisationListDTO | any = null;
    organisationFilter: OrganisationListDTO | null = null;
    branch: BranchDTO | any = null;
    branchFilter: BranchDTO | null = null;
}

@Component({
  selector: "app-user-editor-base",
  template: "",
})
export abstract class UserEditorComponent extends GenericComponent<UserEditorForm> implements OnInit, OnDestroy, AfterViewInit {

    separatorKeysCodes: number[] = [ENTER, COMMA];
    userEditorComponentSignalForm = this.formObject;
    createNewRoles(): String {
        return '';
    }

    organisationCompare(o1: OrganisationListDTO | any, o2: OrganisationListDTO | any) {
        return false;
    }

    filterOrganisation() {}

    organisationBackingList: OrganisationListDTO[] = [];
    organisationFilteredList = linkedSignal<OrganisationListDTO[]>(() => []);

    organisationDisplays: string[] = [
        'name',
    ];
    organisationFilterControl = new FormControl('');

    branchCompare(o1: BranchDTO | any, o2: BranchDTO | any) {
        return false;
    }

    filterBranch() {}

    branchBackingList: BranchDTO[] = [];
    branchFilteredList = linkedSignal<BranchDTO[]>(() => []);

    branchDisplays: string[] = [
        'name',
    ];
    branchFilterControl = new FormControl('');
    GeneralStatusT: any = GeneralStatus;
    GeneralStatusOptions = Object.keys(this.GeneralStatusT);
    KycComplianceStatusT: any = KycComplianceStatus;
    KycComplianceStatusOptions = Object.keys(this.KycComplianceStatusT);

    constructor(
    ) {
        super();
    }

    override createNewFormObject(): UserEditorForm {
      return new UserEditorForm();
    }

    override createValidators(path: SchemaPathTree<UserEditorForm, PathKind.Root>): void {
      required(path.username);
      required(path.email);
      email(path.email);
      required(path.password);
      required(path.firstName);
      required(path.lastName);
      required(path.enabled);
    }

    ngOnInit() {

    }

    ngOnDestroy() {}

    ngAfterViewInit() {
      this.formSignal.update((form) => ({
        ...this.formData
      }));
    }


    rolesSelected(event: MatAutocompleteSelectedEvent): void {
     //   let item: Array<string> = event.option.value;

    //    this.userEditorForm.roles?.push(event.option.value);
    //    this.setRolesControl();
    //    this.rolesChipControl.setValue(null);

        // remove the selected rorolesle from the list
        // this.rolesBackingList = this.rolesBackingList.filter((roles: any) => roles.value !== item.value);
    //    this.rolesFilteredList$ = of(this.rolesBackingList);
    }

    organisationAddDialog(){}

    organisationClear(){}

    organisationSelected(event: MatCheckboxChange, row: number){}

    organisationSearch(){}

    addSelectedOrganisation(){}


    branchAddDialog(){}

    branchClear(){}

    branchSelected(event: MatCheckboxChange, row: number){}

    branchSearch(){}

    addSelectedBranch(){}

    rolesAdd() {

    }

    rolesRemove(i: number, selected: String) {

    }
}
